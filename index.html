<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">

  <title>JSON fune</title>

  <link rel="stylesheet" href="style.css">
  <link rel="icon" type="image/x-icon" href="favicon.ico">
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.2/jquery.min.js"></script>

  <!--[if lt IE 9]>
    <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
  <![endif]-->
</head>

<body>
<div id="content-wrapper">
<div id="wrapper">

<form name="movieForm" onsubmit="return someFunc()">
 		<label>
 		<input type="text" name="movie" placeholder="Movie title or IMDb ID" />
 		</label>   
	<input type="radio" name="radioBtn" value="imdb" id="imdb">IMDb
	<input type="radio" name="radioBtn" value="search" id="search">Movie name
	<input type="submit" id="submit" value="Submit">
</form>

<div id="jsonHolder">
	<h3 class="title">Title</h3>
	<span class="year">Year</span><br>
	<span class="genre">Genre</span>
	<p class="plot">Plot</p>
	<span class="poster">Poster</span>
</div>

<script>

function someFunc() {
	if (!$("input[name='movie']").val()) {
   alert('Empty field, put something!');
   return false;
}
	return true;
}

var $Form = $('form'), $Container = $('#jsonHolder');
$Container.hide();
$Form.on('submit', function(p_oEvent){
    var sUrl, sMovie, oData;
    p_oEvent.preventDefault();
sMovie = $Form.find('input').val();
	if ($("input[name=radioBtn][value='imdb']").prop("checked", true)) {
    sUrl = 'http://www.omdbapi.com/?i=' + sMovie + '&type=movie&tomatoes=true'
  } if ($("input[name=radioBtn][value='search']").prop("checked", true)) {
    sUrl = 'http://www.omdbapi.com/?t=' + sMovie + '&type=movie&tomatoes=true'
  }
    $.ajax(sUrl, {
        complete: function(p_oXHR, p_sStatus){
            oData = $.parseJSON(p_oXHR.responseText);
            console.log(oData);
            $Container.find('.title').text(oData.Title);
            $Container.find('.year').text(oData.Year);
            $Container.find('.genre').text(oData.Genre);
            $Container.find('.plot').text(oData.Plot);
            $Container.find('.poster').html('<img src="' + oData.Poster + '"/>');
            $Container.show();
        }
    });    
});

</script>
</div>
</div>
</body>
</html>
